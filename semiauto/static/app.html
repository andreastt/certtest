<!doctype html>
<meta charset=utf-8>
<title>Firefox OS Conformance Tests</title>

<script>
  var ws;

  window.onload = function() {
    ws = new WebSocket("ws://localhost:6666/tests");
    ws.onopen = function(e) { console.log("opened"); };
    ws.onclose = function(e) { console.log("closed"); };
    ws.onmessage = function(e) {
      console.log("received: " + e.data);
      var data = JSON.parse(e.data);
      if (data.prompt) {
        var response = window.prompt(data.prompt);
        var payload = JSON.stringify({"prompt": response});
        ws_resp = new WebSocket("ws://localhost:6666/resp");
        ws_resp.onopen = function(e) { console.log("opened resp"); ws_resp.send(payload);console.log("sent: " + payload);};
      }
    };
  };
</script>

<body>
  <p>hei!</p>
</body>
